<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title></title>
  <script src="javascripts/jquery-1.6.1.min.js"></script>

</head>
<body>
    <style>
        .container {
            background:  #ccc;
            position: relative;
            margin: 0 auto;
            width: 914px;
        }
            .container .listings {
                overflow: auto;
            }
            .container .row {
                background: #aaa;
                margin: 5px;
                height: 50px;
                width: 6288px;
            }
            .container .row .column {
                float: left;
                height: 50px;
            }
                .container .row .column>div {
                    background: #888;
                    height: 50px;
                    margin-right: 4px;
                }
            .container .channels {
                float: left;
                text-align : right;
                width: 122px;
            }
                .container .channels>div {
                    background: #999;
                    height: 50px;
                    line-height: 50px;
                    margin: 5px 0;
                    padding-right: 10px;
                }
    </style>
    <script>

        var getService = function(){
            $.ajax({
                url: 'http://faraujo.no.de:8080/json',
                cache: 'true',
                dataType: 'json',
                error: function(xhr, status, err){
                    console.log(xhr, status, err);
                },
                success: CIM.tvListings.renderListings
            });
        };


        

        CIM = {};

        CIM.tvListings = (function(){

            $(function(){
                getService();
            });


            return {
                renderListings: function(data){
                    var channels = data.channels,
                        grid = '',
                        chan = '';

                    $.each(channels, function(i, channel){
                        grid += '<div class="row">';
                        chan += '<div>'+channel.chNumber+'</div>';
                        $.each(channel.tvListings, function(k, listing){
                            var duration = (listing.utcEndTime - listing.utcStartTime) / 3600000,
                                width = duration * 262;
                                last = (channel.tvListings.length-1 === k) ? ' last':'';

                            grid += '<div style="width:'+width+'px" class="column '+last+'"><div>'+(listing.seriesName || listing.episodeTitle)+'</div></div>';
                        });
                        grid += '</div>';
                    });

                    $('.container .channels').append(chan)
                    $('.container .listings').append(grid);
                }
            }


        })();
    </script>

    <div class="container">
        <div class="channels"></div>
        <div class="listings"></div>
    </div>
</body>
</html>